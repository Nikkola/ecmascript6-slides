<script language="javascript" type="application/javascript;version=1.8.6">

//Суть генератора заключается  в том, что он по требованию возвращает 
//очередное значение, вычисляемое алгоритмом, который он реализует.
//Отличаются от обычных функций тем, что не вычисляют все значения 
//сразу (если, допустим, в результате получается массив), 
//а вычисляет следующее значение после обращения к нему.

//Для получения очередного значения используется метод next(). 
//Для возврата этого очередного значения генератор использует ключевое слово yield.

//оператор yield, с помощью которого можно легко и красиво писать кастомные
//итераторы.

//Yield - это ключевое слово, которое используется примерно как return
// — отличие в том, что функция вернёт генератор.

//Генераторы объявляются выражением function*:
function* compute(degree, max) {
	var a = 1;

	for (let i = 0; i < max; i++) {
		yield a;
		a = a * degree;
	}
}

//После того, как код внутри генератора доходит до yield 
//осуществляется возврат значения, в нашем случае переменной a.
let gen = compute(2, 3);


//Методы генератора возвращают не чистое исходное значение, 
//а объект с двумя параметрами: value и done. Благодаря done становится ясно,
//когда генератор закончен, либо с return, либо простым концом функции
gen.next(); {value: 1, done: false}
gen.next(); {value: 2, done: false}
gen.next(); {value: 4, done: false}
gen.next(); {value: undefined, done: true}

//Передать значение внутрь генератора можно при помощи метода send(). 
//В случае если метод вызывается без параметров он полностью 
//аналогичен вызову next()
for (let degree of compute(2,5)) {
	console.log(degree);
}
// 1, 2 , 4 ,8, 16

function* seq(a) {
	yield a + 5;

	let b = yield null;
	return a + b;
}

let gen = seq(5);

gen.next().value; //10
gen.next().value; //null
gen.next(8).value; //13

</script>